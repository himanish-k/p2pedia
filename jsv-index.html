
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>P2Pedia</title>

    <!-- Bootstrap core CSS -->
    <link href="styles/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug 
    <link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet"> -->

    <!-- Custom styles for this template -->
    <link href="styles/dashboard.css" rel="stylesheet">

    <!-- Custom styles for this page -->
    <link href="styles/styles.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]
    <script src="../../assets/js/ie-emulation-modes-warning.js"></script> -->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div id="sections">

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">P2Pedia - powered by UP2P</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#">Connect</a></li>
            <li><a href="#">Disconnect</a></li>
            <!-- <li><a data-link="current" href="#">{^{:current}}</a></li> -->
          </ul>
          <form class="navbar-form navbar-right">
            <input type="text" class="form-control" placeholder="Search...">
          </form>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
          <ul class="nav nav-sidebar" style="display: none;" data-link="visible{:!enabled}">
            <li><a href="#" id="close-editor">Close</a></li>
          </ul>
          <ul id="navigation" class="nav nav-sidebar menu" data-link="visible{:enabled}">
            <li class="active"><a href="#" id="nav-to-dashboard">Dashboard</a></li>
            <li><a href="#" id="nav-to-document-list">Documents</a></li>
            <li><a href="#" id="nav-to-document-new">New Document</a></li>
            <li><a href="#" id="nav-to-search">Search</a></li>
            <li><a href="#">Peers</a></li>
            <li><a href="#">Export</a></li>
          </ul>
          <ul class="nav nav-sidebar menu">
            <li><a href="#" id="nav-to-settings">Settings</a></li>
            <li><a href="#">About</a></li>
          </ul>
        </div>
        
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
          
          <div id="dashboard" data-link="visible{:current == 'dashboard'}">
            <h1 class="page-header"></h1>
            <div class="row placeholders">
              <div class="col-xs-6 col-sm-3 placeholder">
              <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
                <!--<img src="data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="200" height="200" class="img-responsive" alt="Generic placeholder thumbnail">-->
                <h4>Popularity</h4>
                <span class="text-muted"></span>
              </div>
              <div class="col-xs-6 col-sm-3 placeholder">
                             <span class="glyphicon glyphicon-signal" aria-hidden="true"></span>

                <h4>Network Load</h4>
                <span class="text-muted"></span>
              </div>
              <div class="col-xs-6 col-sm-3 placeholder">
                              <span class="glyphicon glyphicon-file" aria-hidden="true"></span>

                <h4>Recent Documents</h4>
                <span class="text-muted">This document</span>
                <span class="text-muted">That document</span>
                <span class="text-muted">Why document</span>
              </div>
              <div class="col-xs-6 col-sm-3 placeholder">
                <img src="data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="200" height="200" class="img-responsive" alt="Generic placeholder thumbnail">
                <h4>Label</h4>
                <span class="text-muted">Something else</span>
              </div>
            </div>
          </div>

          <div id="document-edit" style="visibility: hidden" data-link="visible{:current == 'document-edit'}">

          </div>

          <div id="document-view" style="visibility: hidden" data-link="visible{:current == 'document-view'}">
            
          </div>

          <div id="document-new" style="visibility: hidden" data-link="visible{:current == 'document-new'}">
            
          </div>

          <div id="search" style="visibility: hidden" data-link="visible{:current == 'search'}">
            
          </div>

          <div id="search-result" style="visibility: hidden" data-link="visible{:current == 'search-result'}">

          </div>

          <div id="settings" style="visibility: hidden" data-link="visible{:current == 'settings'}">
            <input class="btn btn-danger" type="button" id="settings-erase" value="Erase Documents">
            <input class="btn btn-default" type="button" id="settings-backup" value="Backup Documents">
            <input class="btn btn-default" type="button" id="settings-reset" value="Reset From Backup">
            <input class="btn btn-default" type="button" id="settings-inject-mock" value="Inject Mock Data">
          </div>
          <!--
          <div id="edit-document" data-link="visible{:current == 'document-edit'}">
            <form>
              <p id="new-doc-form" style="display:none">
                Title: <input type="text" name="title">
                Author: <input type="text" name="author">
              </p>
              <p id="edit-doc-form" style="display:none">
                Title: <span id="title"></span> <br />
                Author: <span id="author"></span>
              </p>

              <!-- Change id in js file to 'ckeditor' from 'editor' 
              <textarea name="editor" id="ckeditor" rows="20" cols="80"></textarea>
              <p><input type="button" value="Submit" onclick="return submitForm()"></p>
            </form>
          </div> -->

          <!-- Unable to understand a bug, but if any section is placed after the 
               document-list section and its visibility is to be controlled by the
               current variable, it renders regardless of the property of current -->       
          <div id="document-list" data-link="visible{:current == 'document-list'}">
            
          </div>
        
        </div>
      </div>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> --
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <!-- Just to make our placeholder images work. Don't actually copy the next line!
    <script src="../../assets/js/vendor/holder.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug 
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>

    <!-- porting code for index.html, change name to dashboard.js
    <script src="js/index.js"></script> 
    There is no dashboard.js! 
    <script type="text/javascript" src="js/documents.js"></script> -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsviews/0.9.83/jquery.observable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsviews/0.9.83/jsviews.min.js"></script>
    <script src="js/lorem.js" type="text/javascript"></script>

    <!-- CKEditor and JQuery 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> -->
    <script type="text/javascript" src="ckeditor/ckeditor.js"></script>
    <script type="text/javascript" src="ckeditor/adapters/jquery.js"></script>
    <!-- <script type="text/javascript" src="js/jsv-editor.js"></script> -->

    <!-- Responsible for navigation in response to the side bar -->
    <!--<script type="text/javascript" src="js/controller.js"></script>-->

    <!-- Loads the right document for viewing -->
    <!--<script type="text/javascript" src="js/viewer.js"></script>-->

    <!-- Almost all scripts above this should be removed once all features are 
          implemented using jsViews and jsObservable -->        
    <script id="search-result-template" type="text/x-jsrender">
      <input class="btn btn-default" type="button" id="search-result-back-btn" value="Back">

      {{include tmpl="#document-list-table-template" /}}

    </script>

    <script id="document-list-table-template" type="text/x-jsrender">

      <h2 class="sub-header"></h2>
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead> 
            <tr>
              <th>ID</th>
              <th>Title</th>
              <th>Author</th>
              <th>Date Created</th>
              <th>Views</th>
              <th>Upvotes</th>
              <th>Downvotes</th>
            </tr>
          </thead>             

          <tbody id="document-list-data">
            {{include tmpl="#document-list-table-row-template"/}}

          </tbody>
          
        </table>
      </div>
    </script>

    <!-- Displays list of published documents. -->
    <script id="document-list-table-row-template" type="text/x-jsrender">
       
          {^{for documents}}
            <tr class="nav-to-document-view">
              <td>{^{:id}}</td>
              <td>{^{:title}}</td>
              <td>{^{:author}}</td>
              <td>{^{:date_created}}</td>
              <td>{^{:views}}</td>
              <td>{^{:upvotes}}</td>
              <td>{^{:downvotes}}</td>
            </tr>
          {{/for}}
        
    </script>
    <script type="text/javascript">
      var documentListTemplate = $.templates("#document-list-table-template");
      var documentList = { 
        documents : [],
        insert : function(doc, index) {
          if(index)
            $.observable(this.documents).insert(index, doc);
          else
            $.observable(this.documents).insert(doc);            
        },
        remove : function(index) {
          $.observable(this.documents).remove(index);
        }
      };
      if(localStorage['documents'])
        documentList.documents = JSON.parse(localStorage['documents']);
      documentListTemplate.link("#document-list", documentList);
    </script>

    <script type="text/javascript">
      var searchResultTemplate = $.templates("#search-result-template");
      var searchResults = { 
        documents : [],
        insert : function(doc, index) {
          if(index)
            $.observable(this.documents).insert(index, doc);
          else
            $.observable(this.documents).insert(doc);            
        },
        remove : function(index) {
          $.observable(this.documents).remove(index);
        }
      };
      searchResultTemplate.link("#search-result", searchResults);
    </script>


    <!-- Displays content of a published document. -->
    <script id="document-view-template" type="text/x-jsrender">
      <div class="sub-header">
        <input class="btn btn-default" type="button" id="document-view-back-btn" value="Back">
        <input class="btn btn-default" type="button" id="document-edit" value="Edit Document">
      </div>
      <div class="sub-header">
        <h3>{^{:document^title}}</h3>
        <p>By {^{:document^author}}</p>
      </div>
      {^{:document^content}}
    </script> 
    <script type="text/javascript">    
      var documentViewTemplate = $.templates("#document-view-template");
      var documentView = { };
      documentView.document = { };
      documentViewTemplate.link("#document-view", documentView);
    </script>


    <!-- A form to create a new document. -->
    <script id="document-new-template" type="text/x-jsrender">
      <form class="well">
        <div class="form-inline">
          <div class="form-group">
            <label>Title:</label>
            <input class="form-control" type="text" name="title" data-link="title">
          </div>
          <div class="form-group">
            <label>Author:</label>
            <input class="form-control" type="text" name="author" data-link="author">
          </div>
          <input class="btn btn-default" type="button" id="document-new-draft" value="Save to Drafts">
          <input class="btn btn-default" type="button" id="document-new-publish" value="Publish Document">
        </div>

        <textarea name="editor-document-new" id="editor-document-new" data-link="content" rows="20" cols="80"></textarea>
      </form>
    </script>


    <script id="document-edit-template" type="text/x-jsrender">
      <form class="well">
        <div class="form-inline">
          <div class="form-group">
            <label>Title:</label>
            <input class="form-control" type="text" name="title" data-link="document^title">
          </div>
          <div class="form-group">
            <label>Author:</label>
            <input class="form-control" type="text" name="author" data-link="document^author">
          </div>
          <input class="btn btn-default" type="button" id="document-edit-draft" value="Save to Drafts">
          <input class="btn btn-default" type="button" id="document-edit-publish" value="Publish Document">
        </div>

        <textarea name="editor-document-edit" id="editor-document-edit" data-link="content" rows="20" cols="80"></textarea>
      </form>
    </script>
    <script type="text/javascript">
      var documentEditTemplate = $.templates('#document-edit-template');
      var documentEdit = { };
      documentEdit.document = { };
      documentEditTemplate.link("#document-edit", documentEdit);  
    </script>


    <script id="search-template" type="text/x-jsrender">
      <form class="well">
        <div class="form-inline">
          <div class="form-group">
            <label>Title:</label>
            <input class="form-control" type="text" name="title" data-link="title">
          </div>
          <div class="form-group">
            <label>Author:</label>
            <input class="form-control" type="text" name="author" data-link="author">
          </div>
          <input class="btn btn-default" type="button" id="btn-search" value="Search">
        </div>
      </form>
    </script>
    <script type="text/javascript">
      var searchTemplate = $.templates('#search-template');
      var searchItems = { 
        title : "",
        author : ""
      };
      searchTemplate.link("#search", searchItems);  
    </script>
    <script type="text/javascript" src="js/queryHandler.js"></script>
    <script type="text/javascript" src="js/dataHandler.js"></script>
    <script type="text/javascript" src="js/controller.js"></script>
    </div>
  </body>
</html>
